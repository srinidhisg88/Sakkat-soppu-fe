import{j as e,m as a}from"./ui-vendor-090db037.js";import{b as r,h as s,r as t}from"./react-vendor-e826ac9a.js";import{q as l,a as o}from"./index-e944f7cc.js";import{P as n}from"./ProductCard-34d203f1.js";import{c,E as i}from"./EmptyState-90642793.js";import{P as d}from"./Shimmer-954c7611.js";import{u as m}from"./data-vendor-7193eb6f.js";import{M as x,S as g}from"./search-3268ebc4.js";import"./format-01d13a2f.js";import"./useAddToCartBar-db5d6b60.js";
/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=c("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function p(){const c=r(),[p]=s(),[h,y]=t.useState(""),j=p.get("category")||null,{data:f,isLoading:v,isError:N}=m({queryKey:["products","all"],queryFn:async()=>{var e,a,r;const s=(await o({page:1,limit:1e3})).data;return(null!=(r=null!=(a=null!=(e=null==s?void 0:s.products)?e:null==s?void 0:s.data)?a:null==s?void 0:s.items)?r:[]).filter(e=>{var a;return Number(null!=(a=e.stock)?a:0)>0})}}),b=null!=f?f:[],w=t.useMemo(()=>{const e=new Map;return b.forEach(a=>{var r;const s=a.category||"Uncategorized";e.has(s)||e.set(s,{name:s,image:a.imageUrl||(null==(r=a.images)?void 0:r[0])||""})}),Array.from(e.entries()).map(([e,a])=>({id:e,name:e,image:a.image})).sort((e,a)=>e.name.localeCompare(a.name))},[b]),C=t.useMemo(()=>b.filter(e=>{var a,r,s;const t=!j||e.category===j;if(!h.trim())return t;const l=h.toLowerCase(),o=(null==(a=e.name)?void 0:a.toLowerCase().includes(l))||(null==(r=e.description)?void 0:r.toLowerCase().includes(l))||(null==(s=e.category)?void 0:s.toLowerCase().includes(l));return t&&o}),[b,j,h]),k=e=>{y(""),c(e?"/categories/all?category=".concat(encodeURIComponent(e)):"/categories/all")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 md:py-8",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx(a.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-20 space-y-2",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 px-3",children:"Categories"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(x,{className:"h-5 w-5 text-gray-400 absolute left-3 top-3"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]}),e.jsx("button",{onClick:()=>k(null),className:"w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ".concat(j?"bg-white text-gray-700 hover:bg-green-50 hover:text-green-700":"bg-green-600 text-white font-semibold shadow-md"),children:"All Products"}),e.jsx("div",{className:"space-y-1 max-h-[calc(100vh-300px)] overflow-y-auto",children:w.map(a=>e.jsx("button",{onClick:()=>k(a.name),className:"w-full text-left px-4 py-3 rounded-lg transition-all duration-200 ".concat(j===a.name?"bg-green-600 text-white font-semibold shadow-md":"bg-white text-gray-700 hover:bg-green-50 hover:text-green-700"),children:a.name},a.id))})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:j||"All Products"}),e.jsx("p",{className:"text-gray-600 mt-1",children:v?"Loading...":"".concat(C.length," products available")})]}),v?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:Array.from({length:8}).map((a,r)=>e.jsx(d,{},r))}):N?e.jsx(i,{title:"Error Loading Products",description:"There was an error loading products. Please try again.",actionLabel:"Retry",actionTo:"#",IconComponent:u}):0===C.length?e.jsx(i,{title:"No Products Found",description:h?'No products found for "'.concat(h,'"'):"No products are currently available".concat(j?" in ".concat(j):"","."),actionLabel:"Browse All Products",actionTo:"/categories/all",IconComponent:g}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:C.map(a=>e.jsx("div",{children:e.jsx(n,{product:a})},a._id))})]})})]})})}),e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"bg-white px-4 pt-4 pb-3 sticky top-16 z-40 shadow-sm",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"h-5 w-5 text-gray-400 absolute left-3 top-3"}),e.jsx("input",{type:"text",placeholder:"Search",value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"})]})}),e.jsx("div",{className:"px-4 py-3 bg-white",children:e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Recommended Categories"})}),e.jsxs("div",{className:"flex",children:[e.jsx("aside",{className:"w-24 bg-gray-50 border-r border-gray-200 overflow-y-auto h-[calc(100vh-200px)] flex-shrink-0",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>k(null),className:"w-full px-2 py-3 flex flex-col items-center justify-center gap-2 transition-colors ".concat(j?"hover:bg-gray-100":"bg-white border-l-4 border-green-600"),children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(l,{className:"h-6 w-6 ".concat(j?"text-gray-600":"text-green-600")})}),e.jsx("span",{className:"text-xs text-center leading-tight ".concat(j?"text-gray-600":"text-green-600 font-semibold"),children:"Popular"})]}),w.map(a=>{const r=j===a.name;return e.jsxs("button",{onClick:()=>k(a.name),className:"w-full px-2 py-3 flex flex-col items-center justify-center gap-2 transition-colors ".concat(r?"bg-white border-l-4 border-green-600":"hover:bg-gray-100"),children:[a.image?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-200",children:e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-8 h-8 flex items-center justify-center ".concat(r?"text-green-600":"text-gray-600"),children:e.jsx(l,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs text-center leading-tight px-1 ".concat(r?"text-green-600 font-semibold":"text-gray-600"),children:a.name})]},a.id)})]})}),e.jsx("div",{className:"flex-1 px-3 py-4 overflow-y-auto h-[calc(100vh-200px)]",children:v?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:6}).map((a,r)=>e.jsx(d,{},r))}):N?e.jsx("div",{className:"px-4",children:e.jsx(i,{title:"Error Loading Products",description:"There was an error loading products. Please try again.",IconComponent:u})}):0===C.length?e.jsx("div",{className:"px-4",children:e.jsx(i,{title:"No Products Found",description:h?'No products found for "'.concat(h,'"'):"No products available",IconComponent:g})}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:C.map(a=>e.jsx("div",{children:e.jsx(n,{product:a})},a._id))})})]})]})]})}export{p as CategoryPage};
