System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./index-legacy-c4ac752c.js","./EmptyState-legacy-6b533a9b.js","./format-legacy-97f32d7b.js","./Shimmer-legacy-990efe32.js","./data-vendor-legacy-6b4cc34b.js","./ArrowLeftIcon-legacy-aaa2bcd3.js"],function(e,t){"use strict";var a,s,r,i,l,c,n,d,o,m,x,h,u,g,p,b,y,j;return{setters:[e=>{a=e.j,s=e.A,r=e.m},e=>{i=e.r,l=e.b,c=e.L},e=>{n=e.u,d=e.c,o=e.d,m=e.h,x=e.i,h=e.j},e=>{u=e.c,g=e.E},e=>{p=e.d},e=>{b=e.S},e=>{y=e.u},e=>{j=e.A}],execute:function(){function t({title:e,titleId:t,...a},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"}))}e("CartPage",function(){const{items:e,totalPrice:t,updateQuantity:i,removeItem:u,loading:f}=n(),k=l(),{show:C}=d(),{data:L,isLoading:S}=y({queryKey:["public","delivery-settings"],queryFn:async()=>{try{const e=(await h()).data;if(!e)throw new Error("No data");return{enabled:e.enabled??!0,minOrderSubtotal:e.minOrderSubtotal??0,cities:e.cities??[]}}catch{return{enabled:!0,minOrderSubtotal:0,cities:[{name:"Mysuru",basePrice:50,pricePerKg:15,freeDeliveryThreshold:600},{name:"Bengaluru",basePrice:40,pricePerKg:10,freeDeliveryThreshold:500}]}}},staleTime:6e5});o(e.map(e=>e.product._id));const{Banner:E}=m({enabled:!0,mutate:!1}),{stocks:_}=x(),q=(()=>{const e=L;if(!e||!e.enabled)return 0;const a=e.minOrderSubtotal??0;return Math.max(0,a-t)})(),M=!S&&!!L&&L.enabled&&q>0;return f?a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:a.jsx(b,{width:"w-32",height:"h-8"})})}),a.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4 space-y-3",children:[1,2,3].map(e=>a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-3 flex items-center gap-3",children:[a.jsx(b,{width:"w-20",height:"h-20",className:"rounded-xl flex-shrink-0"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx(b,{width:"w-3/4",height:"h-4"}),a.jsx(b,{width:"w-1/2",height:"h-3"}),a.jsx(b,{width:"w-20",height:"h-5"})]}),a.jsx(b,{width:"w-24",height:"h-8",className:"rounded-lg"})]},e))})]}):0===e.length?a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center gap-4",children:[a.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:a.jsx(j,{className:"h-6 w-6 text-gray-700"})}),a.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),a.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:a.jsx(g,{title:"Your Cart is Empty",description:"Browse our products and add some items to your cart.",actionLabel:"Continue Shopping",actionTo:"/",IconComponent:N})})]}):a.jsxs("div",{className:"min-h-screen bg-white pb-16 md:pb-0",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4",children:[a.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:a.jsx(j,{className:"h-6 w-6 text-gray-700"})}),a.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:a.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[e.length>0&&a.jsxs("div",{className:"md:hidden mb-4 flex items-center justify-center gap-2 text-gray-500 text-sm",children:[a.jsx(w,{className:"h-5 w-5"}),a.jsx("span",{children:"Swipe left to delete"})]}),a.jsx("div",{className:"space-y-3 mb-6 md:mb-0",children:a.jsx(s,{children:e.map(e=>{const t=p({unitLabel:e.product.unitLabel,g:e.product.g,pieces:e.product.pieces});return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-2xl flex items-center justify-end px-6",children:a.jsx(v,{className:"h-6 w-6 text-white"})}),a.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-100},transition:{type:"spring",stiffness:500,damping:30},drag:"x",dragDirectionLock:!0,dragConstraints:{left:-100,right:0},dragElastic:.1,dragSnapToOrigin:!0,onDragEnd:(t,a)=>((e,t)=>{t.offset.x<-80&&u(e)})(e.product._id,a),className:"relative bg-gray-50 rounded-2xl shadow-sm border border-gray-200 flex items-center gap-3 p-3",children:[a.jsx(c,{to:`/products/${e.product._id}`,className:"flex-shrink-0",children:a.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:a.jsx("img",{src:e.product.imageUrl||e.product.images?.[0]||"",alt:e.product.name,className:"w-full h-full object-cover"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx(c,{to:`/products/${e.product._id}`,className:"block",children:a.jsx("h3",{className:"font-semibold text-gray-900 text-sm md:text-base truncate",children:e.product.name})}),a.jsx("p",{className:"text-xs text-gray-500",children:e.product.category}),a.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:t}),a.jsxs("p",{className:"text-base font-bold text-gray-900 mt-1",children:["₹",e.product.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("div",{className:"flex items-center bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("button",{onClick:()=>i(e.product._id,Math.max(0,e.quantity-1)),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:"−"}),a.jsx("span",{className:"w-8 text-center font-medium text-sm",children:e.quantity.toString().padStart(2,"0")}),a.jsx("button",{onClick:()=>{const t=_.get(e.product._id),a="number"==typeof t?t:e.product.stock||0;a<=0?C("This item is currently out of stock",{type:"warning"}):e.quantity>=a?(C("Cannot exceed available stock",{type:"warning"}),i(e.product._id,a)):i(e.product._id,e.quantity+1)},className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:"+"})]}),a.jsx("button",{onClick:()=>u(e.product._id),className:"hidden md:flex p-1.5 rounded-lg hover:bg-red-50 transition-colors","aria-label":"Remove item",children:a.jsx(v,{className:"h-5 w-5 text-red-500"})})]})]})]},e.product._id)})})})]}),a.jsx("div",{className:"hidden md:block md:col-span-1",children:a.jsxs("div",{className:"sticky top-24",children:[E,a.jsx(r.button,{onClick:()=>{M||k("/checkout")},disabled:M,"aria-disabled":M,whileHover:M?{}:{scale:1.02},whileTap:M?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all "+(M?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})}),a.jsx("div",{className:"md:hidden fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40",children:a.jsxs("div",{className:"px-4 py-4",children:[E,!S&&M&&a.jsxs("p",{className:"text-xs text-amber-700 mb-3 text-center",children:["Add ₹",q," more to reach minimum order value."]}),a.jsx(r.button,{onClick:()=>{M||k("/checkout")},disabled:M,"aria-disabled":M,whileHover:M?{}:{scale:1.02},whileTap:M?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all "+(M?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})});const w=i.forwardRef(t);function f({title:e,titleId:t,...a},s){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const v=i.forwardRef(f),N=u("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])}}});
