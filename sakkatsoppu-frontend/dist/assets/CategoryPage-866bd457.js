import{j as e,m as a}from"./ui-vendor-090db037.js";import{r as t,f as r,u as s,b as i}from"./react-vendor-e826ac9a.js";import{b as n,q as o}from"./index-3e3efc5f.js";import{P as l}from"./ProductCard-c8412f1c.js";import{E as c}from"./EmptyState-1e8ab27c.js";import{P as d}from"./Pagination-51ac7225.js";import{u as m}from"./data-vendor-7193eb6f.js";import"./format-01d13a2f.js";import"./useAddToCartBar-ed7d9a08.js";function g({title:e,titleId:a,...r},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},r),e?t.createElement("title",{id:a},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const u=t.forwardRef(g),h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function p(){var g,p,v;const{categoryId:y}=r(),j=s(),b=i(),f=new URLSearchParams(j.search),N=Math.max(1,Number(f.get("page")||1)),w=Math.max(1,Number(f.get("limit")||24)),[P,k]=t.useState(N),C=w;t.useEffect(()=>{const e=new URLSearchParams(j.search);e.set("page",String(P)),e.set("limit",String(C));const a=e.toString();a!==j.search.replace(/^\?/,"")&&b({pathname:j.pathname,search:a},{replace:!0})},[P,C,j.pathname,j.search,b]);const{data:E=[]}=m({queryKey:["categories","list"],queryFn:async()=>{var e,a;const t=(await n()).data;return Array.isArray(t)?t:null!=(a=null!=(e=null==t?void 0:t.data)?e:null==t?void 0:t.categories)?a:[]},staleTime:3e5,cacheTime:6e5}),L=E.find(e=>e._id===y),{data:S,isLoading:T,isError:q}=m({queryKey:["products","by-category",y,{page:P,limit:C}],queryFn:async()=>{if(!y)throw new Error("Category ID is required");return(await o(y,{page:P,limit:C})).data},keepPreviousData:!0,enabled:!!y}),A=null!=(g=null==S?void 0:S.products)?g:[],B=null!=(p=null==S?void 0:S.total)?p:0,F=null!=(v=null==S?void 0:S.totalPages)?v:1;return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs(a.div,{initial:"hidden",animate:"visible",variants:h,className:"space-y-8",children:[e.jsxs(a.div,{variants:x,className:"text-center",children:[e.jsxs("button",{onClick:()=>b("/products"),className:"inline-flex items-center text-green-600 hover:text-green-700 mb-4 transition-colors",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),"Back to Products"]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:(null==L?void 0:L.name)||"Category Products"})]}),T?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((a,t)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 animate-pulse",children:[e.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},t))}):q?e.jsx(c,{title:"Error Loading Products",description:"There was an error loading products for this category. Please try again.",actionLabel:"Try Again",actionTo:"#"}):0===A.length?e.jsx(c,{title:"No Products Found",description:"No products are currently available in the ".concat((null==L?void 0:L.name)||"selected"," category."),actionLabel:"Browse All Products",actionTo:"/products"}):e.jsxs(e.Fragment,{children:[e.jsx(a.div,{variants:h,className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-6",children:A.map(t=>e.jsx(a.div,{variants:x,children:e.jsx(l,{product:t})},t._id))}),F>1&&e.jsx(a.div,{variants:x,className:"flex justify-center",children:e.jsx(d,{currentPage:P,totalPages:F,onPageChange:k})}),e.jsxs(a.div,{variants:x,className:"text-center text-gray-600",children:["Showing ",A.length," of ",B," products in ",null==L?void 0:L.name]})]})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The category you're looking for doesn't exist."}),e.jsxs("button",{onClick:()=>b("/products"),className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(u,{className:"h-5 w-5 mr-2"}),"Back to Products"]})]})})}export{p as CategoryPage};
