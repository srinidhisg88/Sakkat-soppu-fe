System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./index-legacy-05c2173c.js","./MapAddressModal-legacy-68f2d451.js","./Shimmer-legacy-990efe32.js","./data-vendor-legacy-6b4cc34b.js","./map-vendor-legacy-febad625.js"],function(e,s){"use strict";var d,a,t,r,l,n,i;return{setters:[e=>{d=e.j},e=>{a=e.u,t=e.r},e=>{r=e.b,l=e.k},e=>{n=e.M},e=>{i=e.S},null,null],execute:function(){e("ProfilePage",function(){const{user:e,isAuthenticated:s,initializing:o,refreshProfile:c}=r(),u=a(),m=u.state?.promptComplete||!1,[h,x]=t.useState(m),[g,p]=t.useState(""),[y,j]=t.useState(""),[f,b]=t.useState(!1),[N,v]=t.useState({name:e?.name||"",phone:e?.phone||"",address:e?.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e?.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e?.latitude||0,longitude:e?.longitude||0});if(t.useEffect(()=>{e&&v({name:e.name||"",phone:e.phone||"",address:e.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e.latitude||0,longitude:e.longitude||0})},[e]),o)return d.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[d.jsx(i,{width:"w-48",height:"h-8"}),d.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[d.jsx(i,{width:"w-full",height:"h-10"}),d.jsx(i,{width:"w-full",height:"h-10"}),d.jsx(i,{width:"w-full",height:"h-24"})]})]});if(!s)return null;if(!e)return d.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[d.jsx(i,{width:"w-48",height:"h-8"}),d.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[d.jsx(i,{width:"w-full",height:"h-10"}),d.jsx(i,{width:"w-full",height:"h-10"})]})]});const w=e=>{const{name:s,value:d}=e.target;v(e=>({...e,[s]:d}))};return d.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"My Profile"}),u.state?.promptComplete&&d.jsx("div",{className:"mb-6 rounded-lg border border-amber-200 bg-amber-50 text-amber-800 px-4 py-3 text-sm",children:"Complete your profile to finish sign-in"}),g&&d.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-lg mb-6",children:g}),y&&d.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded-lg mb-6",children:y}),d.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:h?d.jsxs("form",{onSubmit:async s=>{s.preventDefault();try{await l(N),j("Profile updated successfully"),await c(),e&&v({name:e.name||"",phone:e.phone||"",address:e.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e.latitude||0,longitude:e.longitude||0}),x(!1)}catch(d){p("Failed to update profile")}},className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),d.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:N.name,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),d.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:N.phone,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700 min-h-[2.5rem]",children:N.address.houseNo||N.address.area||N.address.landmark||N.address.city||N.address.state||N.address.pincode?[N.address.houseNo,N.address.area,N.address.landmark,N.address.city,N.address.state,N.address.pincode].filter(Boolean).join(", "):"No address set"}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"button",onClick:()=>b(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit address"})})]})]}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-green-700",children:"Save Changes"}),d.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-semibold hover:bg-gray-300",children:"Cancel"})]})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Full Name"}),d.jsx("p",{className:"mt-1",children:e.name})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Email"}),d.jsx("p",{className:"mt-1",children:e.email})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Phone Number"}),d.jsx("p",{className:"mt-1",children:e.phone})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-sm font-medium text-gray-700",children:"Address"}),d.jsx("p",{className:"mt-1",children:e.address&&"object"==typeof e.address&&"houseNo"in e.address?[e.address.houseNo,e.address.area,e.address.landmark,e.address.city,e.address.state,e.address.pincode].filter(Boolean).join(", "):"string"==typeof e.address?e.address:"Not provided"})]}),d.jsx("button",{onClick:()=>x(!0),className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-green-700",children:"Edit Profile"})]})}),d.jsx(n,{isOpen:f,onClose:()=>b(!1),onConfirm:e=>{v(s=>({...s,address:e.address,latitude:e.latitude,longitude:e.longitude})),b(!1)},defaultCenter:N.latitude&&N.longitude&&0!==N.latitude&&0!==N.longitude?{lat:N.latitude,lon:N.longitude}:null,initialAddress:N.address,showMap:!1})]})})}}});
