System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./index-legacy-ca49b527.js","./MapAddressModal-legacy-3f8f1130.js","./Shimmer-legacy-990efe32.js","./data-vendor-legacy-6b4cc34b.js","./map-vendor-legacy-febad625.js"],function(e,s){"use strict";var t,r,a,l,d,o,i,n,c,u,h;return{setters:[e=>{t=e.j},e=>{r=e.r,a=e.b,l=e.u},e=>{d=e.b,o=e.o,i=e.U,n=e.S,c=e.k},e=>{u=e.M},e=>{h=e.S},null,null],execute:function(){function s({title:e,titleId:s,...t},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?r.createElement("title",{id:s},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}e("ProfilePage",function(){const{user:e,isAuthenticated:s,initializing:x,refreshProfile:g,avatarUrl:p}=d(),{t:f}=o(),b=a(),j=l(),y=j.state?.promptComplete||!1,[v,w]=r.useState("overview"),[N,k]=r.useState(y),[C,S]=r.useState(""),[M,P]=r.useState(""),[A,E]=r.useState(!1),[O,q]=r.useState({name:e?.name||"",phone:e?.phone||"",address:e?.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e?.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e?.latitude||0,longitude:e?.longitude||0});if(r.useEffect(()=>{e&&q({name:e.name||"",phone:e.phone||"",address:e.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e.latitude||0,longitude:e.longitude||0})},[e]),x)return t.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[t.jsx(h,{width:"w-48",height:"h-8"}),t.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[t.jsx(h,{width:"w-full",height:"h-10"}),t.jsx(h,{width:"w-full",height:"h-10"}),t.jsx(h,{width:"w-full",height:"h-24"})]})]});if(!s)return null;if(!e)return t.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[t.jsx(h,{width:"w-48",height:"h-8"}),t.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[t.jsx(h,{width:"w-full",height:"h-10"}),t.jsx(h,{width:"w-full",height:"h-10"})]})]});const z=e=>{const{name:s,value:t}=e.target;q(e=>({...e,[s]:t}))},F=async s=>{s.preventDefault();try{await c(O),P("Profile updated successfully"),await g(),e&&q({name:e.name||"",phone:e.phone||"",address:e.address&&"object"==typeof e.address&&"houseNo"in e.address?e.address:{houseNo:"",landmark:"",area:"string"==typeof e.address?e.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:e.latitude||0,longitude:e.longitude||0}),k(!1),w("overview")}catch(t){S("Failed to update profile")}},K=[{id:"profile",label:f("profile.myProfile"),icon:i,bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"orders",label:f("profile.myOrders"),icon:n,bgColor:"bg-green-50",iconColor:"text-green-600",onClick:()=>b("/orders")}];return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"relative bg-gradient-to-br from-green-800 via-green-700 to-green-900 overflow-hidden pb-20 pt-8 md:pt-12",children:[t.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-green-600 opacity-30 rounded-full -translate-x-12 -translate-y-12"}),t.jsx("div",{className:"absolute top-10 right-10 w-24 h-24 bg-green-900 opacity-20 rounded-full"}),t.jsx("div",{className:"absolute bottom-10 left-1/4 w-20 h-20 bg-green-600 opacity-25 rounded-full"}),t.jsx("div",{className:"absolute top-1/3 right-1/3 w-16 h-16 bg-green-800 opacity-20 rounded-full"}),t.jsx("div",{className:"absolute bottom-20 right-20 w-28 h-28 bg-green-900 opacity-15 rounded-full"}),t.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto px-4 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-white mb-8",children:f("profile.title")}),t.jsx("div",{className:"relative inline-block mb-4",children:t.jsx("div",{className:"w-32 h-32 rounded-full bg-white overflow-hidden border-4 border-white shadow-xl",children:p?t.jsx("img",{src:p,alt:e.name||"Profile",className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-green-100 to-green-200",children:t.jsx(i,{className:"w-20 h-20 text-green-700"})})})}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:e.name}),t.jsx("p",{className:"text-green-100 text-lg",children:($=e.phone,`+91${$}`)})]})]}),t.jsx("div",{className:"relative z-20 -mt-12 max-w-2xl mx-auto px-4 pb-20 md:pb-8",children:t.jsxs("div",{className:"bg-white rounded-t-3xl shadow-xl p-6",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:f("profile.accountOverview")}),"overview"===v&&t.jsx("div",{className:"space-y-4",children:K.map(e=>t.jsxs("button",{onClick:()=>e.onClick?e.onClick():w(e.id),className:"w-full flex items-center justify-between p-4 bg-white rounded-2xl hover:shadow-md transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-3 rounded-xl ${e.bgColor}`,children:t.jsx(e.icon,{className:`h-6 w-6 ${e.iconColor}`})}),t.jsx("span",{className:"font-medium text-gray-800",children:e.label})]}),t.jsx(m,{className:"h-5 w-5 text-gray-400"})]},e.id))}),"profile"===v&&t.jsxs("div",{className:"bg-white rounded-2xl p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800",children:f("profile.editProfile")}),t.jsx("button",{onClick:()=>w("overview"),className:"text-sm text-gray-600 hover:text-gray-800",children:f("profile.cancel")})]}),C&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm",children:C}),M&&t.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 p-3 rounded-lg text-sm",children:M}),t.jsxs("form",{onSubmit:F,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:f("profile.fullName")}),t.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:O.name,onChange:z,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1.5",children:f("profile.phoneNumber")}),t.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:O.phone,onChange:z,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:f("profile.address")}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-700 min-h-[3rem]",children:O.address.houseNo||O.address.area||O.address.landmark||O.address.city||O.address.state||O.address.pincode?[O.address.houseNo,O.address.area,O.address.landmark,O.address.city,O.address.state,O.address.pincode].filter(Boolean).join(", "):f("profile.noAddressSet")}),t.jsxs("button",{type:"button",onClick:()=>E(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-800 rounded-xl hover:bg-blue-100 border-2 border-blue-200 font-medium transition-all",children:["ðŸ“ ",f("profile.editAddress")]})]})]}),t.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all shadow-lg",children:f("profile.saveChanges")})]})]})]})}),t.jsx(u,{isOpen:A,onClose:()=>E(!1),onConfirm:e=>{q(s=>({...s,address:e.address,latitude:e.latitude,longitude:e.longitude})),E(!1)},defaultCenter:O.latitude&&O.longitude&&0!==O.latitude&&0!==O.longitude?{lat:O.latitude,lon:O.longitude}:null,initialAddress:O.address,showMap:!1})]});var $});const m=r.forwardRef(s)}}});
