import{j as e,A as t,m as a}from"./ui-vendor-090db037.js";import{r as s,b as r,L as i}from"./react-vendor-e826ac9a.js";import{u as l,c as n,d as c,h as o,i as d,j as m}from"./index-8909774e.js";import{c as x,E as h}from"./EmptyState-90642793.js";import{d as u}from"./format-01d13a2f.js";import{S as p}from"./Shimmer-954c7611.js";import{u as g}from"./data-vendor-7193eb6f.js";import{A as b}from"./ArrowLeftIcon-26eeecc0.js";function y({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"}))}const j=s.forwardRef(y);function w({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const f=s.forwardRef(w),v=x("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);function N(){const{items:s,totalPrice:x,updateQuantity:y,removeItem:w,loading:N}=l(),k=r(),{show:C}=n(),{data:L,isLoading:E}=g({queryKey:["public","delivery-settings"],queryFn:async()=>{var e,t,a;try{const s=(await m()).data;if(!s)throw new Error("No data");return{enabled:null==(e=s.enabled)||e,minOrderSubtotal:null!=(t=s.minOrderSubtotal)?t:0,cities:null!=(a=s.cities)?a:[]}}catch(s){return{enabled:!0,minOrderSubtotal:0,cities:[{name:"Mysuru",basePrice:50,pricePerKg:15,freeDeliveryThreshold:600},{name:"Bengaluru",basePrice:40,pricePerKg:10,freeDeliveryThreshold:500}]}}},staleTime:6e5});c(s.map(e=>e.product._id));const{Banner:S}=o({enabled:!0,mutate:!1}),{stocks:_}=d(),q=(()=>{var e;const t=L;if(!t||!t.enabled)return 0;const a=null!=(e=t.minOrderSubtotal)?e:0;return Math.max(0,a-x)})(),M=!E&&!!L&&L.enabled&&q>0;if(N)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:e.jsx(p,{width:"w-32",height:"h-8"})})}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4 space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-3 flex items-center gap-3",children:[e.jsx(p,{width:"w-20",height:"h-20",className:"rounded-xl flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(p,{width:"w-3/4",height:"h-4"}),e.jsx(p,{width:"w-1/2",height:"h-3"}),e.jsx(p,{width:"w-20",height:"h-5"})]}),e.jsx(p,{width:"w-24",height:"h-8",className:"rounded-lg"})]},t))})]});if(0===s.length)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:e.jsx(b,{className:"h-6 w-6 text-gray-700"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsx(h,{title:"Your Cart is Empty",description:"Browse our products and add some items to your cart.",actionLabel:"Continue Shopping",actionTo:"/",IconComponent:v})})]});return e.jsxs("div",{className:"min-h-screen bg-white pb-16 md:pb-0",children:[e.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:e.jsx(b,{className:"h-6 w-6 text-gray-700"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[s.length>0&&e.jsxs("div",{className:"md:hidden mb-4 flex items-center justify-center gap-2 text-gray-500 text-sm",children:[e.jsx(j,{className:"h-5 w-5"}),e.jsx("span",{children:"Swipe left to delete"})]}),e.jsx("div",{className:"space-y-3 mb-6 md:mb-0",children:e.jsx(t,{children:s.map(t=>{var s;const r=u({unitLabel:t.product.unitLabel,g:t.product.g,pieces:t.product.pieces});return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-2xl flex items-center justify-end px-6",children:e.jsx(f,{className:"h-6 w-6 text-white"})}),e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-100},transition:{type:"spring",stiffness:500,damping:30},drag:"x",dragDirectionLock:!0,dragConstraints:{left:-100,right:0},dragElastic:.1,dragSnapToOrigin:!0,onDragEnd:(e,a)=>((e,t)=>{t.offset.x<-80&&w(e)})(t.product._id,a),className:"relative bg-gray-50 rounded-2xl shadow-sm border border-gray-200 flex items-center gap-3 p-3",children:[e.jsx(i,{to:"/products/".concat(t.product._id),className:"flex-shrink-0",children:e.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.product.imageUrl||(null==(s=t.product.images)?void 0:s[0])||"",alt:t.product.name,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(i,{to:"/products/".concat(t.product._id),className:"block",children:e.jsx("h3",{className:"font-semibold text-gray-900 text-sm md:text-base truncate",children:t.product.name})}),e.jsx("p",{className:"text-xs text-gray-500",children:t.product.category}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:r}),e.jsxs("p",{className:"text-base font-bold text-gray-900 mt-1",children:["₹",t.product.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("button",{onClick:()=>y(t.product._id,Math.max(0,t.quantity-1)),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:"−"}),e.jsx("span",{className:"w-8 text-center font-medium text-sm",children:t.quantity.toString().padStart(2,"0")}),e.jsx("button",{onClick:()=>{const e=_.get(t.product._id),a="number"==typeof e?e:t.product.stock||0;a<=0?C("This item is currently out of stock",{type:"warning"}):t.quantity>=a?(C("Cannot exceed available stock",{type:"warning"}),y(t.product._id,a)):y(t.product._id,t.quantity+1)},className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:"+"})]}),e.jsx("button",{onClick:()=>w(t.product._id),className:"hidden md:flex p-1.5 rounded-lg hover:bg-red-50 transition-colors","aria-label":"Remove item",children:e.jsx(f,{className:"h-5 w-5 text-red-500"})})]})]})]},t.product._id)})})})]}),e.jsx("div",{className:"hidden md:block md:col-span-1",children:e.jsxs("div",{className:"sticky top-24",children:[S,e.jsx(a.button,{onClick:()=>{M||k("/checkout")},disabled:M,"aria-disabled":M,whileHover:M?{}:{scale:1.02},whileTap:M?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all ".concat(M?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})}),e.jsx("div",{className:"md:hidden fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40",children:e.jsxs("div",{className:"px-4 py-4",children:[S,!E&&M&&e.jsxs("p",{className:"text-xs text-amber-700 mb-3 text-center",children:["Add ₹",q," more to reach minimum order value."]}),e.jsx(a.button,{onClick:()=>{M||k("/checkout")},disabled:M,"aria-disabled":M,whileHover:M?{}:{scale:1.02},whileTap:M?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all ".concat(M?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})}export{N as CartPage};
