System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./index-legacy-05c2173c.js","./EmptyState-legacy-6b533a9b.js","./format-legacy-97f32d7b.js","./Shimmer-legacy-990efe32.js","./data-vendor-legacy-6b4cc34b.js","./ArrowLeftIcon-legacy-aaa2bcd3.js"],function(e,t){"use strict";var s,r,a,l,i,d,n,c,o,x,h,m,y,g,u,p,b,j;return{setters:[e=>{s=e.j,r=e.A,a=e.m},e=>{l=e.r,i=e.b,d=e.L},e=>{n=e.u,c=e.c,o=e.d,x=e.h,h=e.i,m=e.j},e=>{y=e.c,g=e.E},e=>{u=e.d},e=>{p=e.S},e=>{b=e.u},e=>{j=e.A}],execute:function(){function t({title:e,titleId:t,...s},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 15.75 3 12m0 0 3.75-3.75M3 12h18"}))}e("CartPage",function(){const{items:e,totalPrice:t,updateQuantity:l,removeItem:y,loading:v}=n(),k=i(),{show:T}=c(),{data:D,isLoading:F}=b({queryKey:["public","delivery-settings"],queryFn:async()=>{try{const e=(await m()).data;if(!e)throw new Error("No data");return{enabled:e.enabled??!0,deliveryFee:e.deliveryFee??0,freeDeliveryThreshold:e.freeDeliveryThreshold??0,minOrderSubtotal:e.minOrderSubtotal??0}}catch{return{enabled:!0,deliveryFee:0,freeDeliveryThreshold:0,minOrderSubtotal:0}}},staleTime:6e5});o(e.map(e=>e.product._id));const{Banner:C}=x({enabled:!0,mutate:!1}),{stocks:S}=h(),L=(()=>{const e=D;if(!e||!e.enabled)return 0;const s=e.minOrderSubtotal??0;return Math.max(0,s-t)})(),E=!F&&!!D&&D.enabled&&L>0;return v?s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:s.jsx(p,{width:"w-32",height:"h-8"})})}),s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4 space-y-3",children:[1,2,3].map(e=>s.jsxs("div",{className:"bg-gray-50 rounded-2xl p-3 flex items-center gap-3",children:[s.jsx(p,{width:"w-20",height:"h-20",className:"rounded-xl flex-shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(p,{width:"w-3/4",height:"h-4"}),s.jsx(p,{width:"w-1/2",height:"h-3"}),s.jsx(p,{width:"w-20",height:"h-5"})]}),s.jsx(p,{width:"w-24",height:"h-8",className:"rounded-lg"})]},e))})]}):0===e.length?s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:s.jsx(j,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),s.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:s.jsx(g,{title:"Your Cart is Empty",description:"Browse our products and add some items to your cart.",actionLabel:"Continue Shopping",actionTo:"/",IconComponent:N})})]}):s.jsxs("div",{className:"min-h-screen bg-white pb-16 md:pb-0",children:[s.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:()=>k("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:s.jsx(j,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Cart"})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:s.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[e.length>0&&s.jsxs("div",{className:"md:hidden mb-4 flex items-center justify-center gap-2 text-gray-500 text-sm",children:[s.jsx(f,{className:"h-5 w-5"}),s.jsx("span",{children:"Swipe left to delete"})]}),s.jsx("div",{className:"space-y-3 mb-6 md:mb-0",children:s.jsx(r,{children:e.map(e=>{const t=u({unitLabel:e.product.unitLabel,g:e.product.g,pieces:e.product.pieces});return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-2xl flex items-center justify-end px-6",children:s.jsx(w,{className:"h-6 w-6 text-white"})}),s.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,x:-100},transition:{type:"spring",stiffness:500,damping:30},drag:"x",dragDirectionLock:!0,dragConstraints:{left:-100,right:0},dragElastic:.1,dragSnapToOrigin:!0,onDragEnd:(t,s)=>((e,t)=>{t.offset.x<-80&&y(e)})(e.product._id,s),className:"relative bg-gray-50 rounded-2xl shadow-sm border border-gray-200 flex items-center gap-3 p-3",children:[s.jsx(d,{to:`/products/${e.product._id}`,className:"flex-shrink-0",children:s.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden bg-gray-100",children:s.jsx("img",{src:e.product.imageUrl||e.product.images?.[0]||"",alt:e.product.name,className:"w-full h-full object-cover"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx(d,{to:`/products/${e.product._id}`,className:"block",children:s.jsx("h3",{className:"font-semibold text-gray-900 text-sm md:text-base truncate",children:e.product.name})}),s.jsx("p",{className:"text-xs text-gray-500",children:e.product.category}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:t}),s.jsxs("p",{className:"text-base font-bold text-gray-900 mt-1",children:["₹",e.product.price.toFixed(2)]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsxs("div",{className:"flex items-center bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("button",{onClick:()=>l(e.product._id,Math.max(0,e.quantity-1)),className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Decrease quantity",children:"−"}),s.jsx("span",{className:"w-8 text-center font-medium text-sm",children:e.quantity.toString().padStart(2,"0")}),s.jsx("button",{onClick:()=>{const t=S.get(e.product._id),s="number"==typeof t?t:e.product.stock||0;s<=0?T("This item is currently out of stock",{type:"warning"}):e.quantity>=s?(T("Cannot exceed available stock",{type:"warning"}),l(e.product._id,s)):l(e.product._id,e.quantity+1)},className:"w-8 h-8 flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors","aria-label":"Increase quantity",children:"+"})]}),s.jsx("button",{onClick:()=>y(e.product._id),className:"hidden md:flex p-1.5 rounded-lg hover:bg-red-50 transition-colors","aria-label":"Remove item",children:s.jsx(w,{className:"h-5 w-5 text-red-500"})})]})]})]},e.product._id)})})})]}),s.jsx("div",{className:"hidden md:block md:col-span-1",children:s.jsxs("div",{className:"sticky top-24",children:[C,s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-3",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Sub Total"}),s.jsxs("span",{className:"font-semibold",children:["₹",t.toFixed(2)]})]}),F?s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Delivery fee"}),s.jsx(p,{width:"w-12",height:"h-4"})]}):D&&D.enabled?s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Delivery fee"}),s.jsx("span",{className:"font-semibold",children:D.freeDeliveryThreshold>0&&t>=D.freeDeliveryThreshold?"Free":D.deliveryFee>0?`₹${D.deliveryFee.toFixed(2)}`:"Free"})]}):null]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 mt-3 border-t border-gray-200",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),F?s.jsx(p,{width:"w-20",height:"h-6"}):s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["₹",(D&&D.enabled?D.freeDeliveryThreshold>0&&t>=D.freeDeliveryThreshold?t:t+(D.deliveryFee||0):t).toFixed(2)]})]}),!F&&D&&D.enabled&&D.freeDeliveryThreshold>0&&t<D.freeDeliveryThreshold&&s.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Free delivery over ₹",D.freeDeliveryThreshold]}),!F&&E&&s.jsxs("p",{className:"text-xs text-amber-700 mt-2",children:["Add ₹",L," more to reach minimum order value."]})]}),s.jsx(a.button,{onClick:()=>{E||k("/checkout")},disabled:E,"aria-disabled":E,whileHover:E?{}:{scale:1.02},whileTap:E?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all "+(E?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})}),s.jsx("div",{className:"md:hidden fixed bottom-16 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40",children:s.jsxs("div",{className:"px-4 py-4",children:[C,s.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-3",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Order Summary"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Sub Total"}),s.jsxs("span",{className:"font-semibold",children:["₹",t.toFixed(2)]})]}),F?s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Delivery fee"}),s.jsx(p,{width:"w-12",height:"h-4"})]}):D&&D.enabled?s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Delivery fee"}),s.jsx("span",{className:"font-semibold",children:D.freeDeliveryThreshold>0&&t>=D.freeDeliveryThreshold?"Free":D.deliveryFee>0?`₹${D.deliveryFee.toFixed(2)}`:"Free"})]}):null]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 mt-3 border-t border-gray-200",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),F?s.jsx(p,{width:"w-20",height:"h-6"}):s.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["₹",(D&&D.enabled?D.freeDeliveryThreshold>0&&t>=D.freeDeliveryThreshold?t:t+(D.deliveryFee||0):t).toFixed(2)]})]}),!F&&D&&D.enabled&&D.freeDeliveryThreshold>0&&t<D.freeDeliveryThreshold&&s.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Free delivery over ₹",D.freeDeliveryThreshold]}),!F&&E&&s.jsxs("p",{className:"text-xs text-amber-700 mt-2",children:["Add ₹",L," more to reach minimum order value."]})]}),s.jsx(a.button,{onClick:()=>{E||k("/checkout")},disabled:E,"aria-disabled":E,whileHover:E?{}:{scale:1.02},whileTap:E?{}:{scale:.98},className:"w-full py-4 rounded-xl font-bold text-lg shadow-lg transition-all "+(E?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Checkout"})]})})]})});const f=l.forwardRef(t);function v({title:e,titleId:t,...s},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const w=l.forwardRef(v),N=y("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])}}});
