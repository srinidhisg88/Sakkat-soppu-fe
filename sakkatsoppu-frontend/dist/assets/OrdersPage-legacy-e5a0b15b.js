System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./format-legacy-97f32d7b.js","./index-legacy-67042b98.js","./EmptyState-legacy-6b533a9b.js","./Shimmer-legacy-990efe32.js","./data-vendor-legacy-6b4cc34b.js","./ArrowLeftIcon-legacy-aaa2bcd3.js","./search-legacy-1a45af4d.js"],function(e,t){"use strict";var s,r,a,i,n,c,d,l,o,m,x,u,y,p;return{setters:[e=>{s=e.j},e=>{r=e.b,a=e.r},e=>{i=e.d},e=>{n=e.b,c=e.n,d=e.a},e=>{l=e.c,o=e.E},e=>{m=e.S},e=>{x=e.u},e=>{u=e.A},e=>{y=e.M,p=e.S}],execute:function(){e("OrdersPage",function(){const{isAuthenticated:e}=n(),l=r(),[h,g]=a.useState(""),{data:j=[],isLoading:f}=x({queryKey:["orders"],queryFn:async()=>{const e=(await c()).data;return Array.isArray(e)?e:e&&"object"==typeof e&&Array.isArray(e.data)&&e.data||[]}}),{data:b=[]}=x({queryKey:["products","for-orders"],queryFn:async()=>{const e=await d({page:1,limit:500}),t=e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const s=e,r=["data","products","items","results","payload"];for(const e of r)if(e in s){const r=t(s[e]);if(Array.isArray(r))return r}const a=Object.values(s).find(Array.isArray);if(a)return t(a)}return[]};return t(e.data)},staleTime:6e4}),v=new Map;for(const t of b)if(t&&"object"==typeof t){const e=t,s="string"==typeof e._id?e._id:void 0,r="string"==typeof e.id?e.id:void 0;s&&v.set(s,t),r&&v.set(r,t)}let N=j;if(!e){const e=localStorage.getItem("sakkat_orders");N=e?JSON.parse(e):[]}const w=a.useMemo(()=>{let e=N;if(h.trim()){const t=h.toLowerCase();e=e.filter(e=>(e.items||[]).some(e=>{const s=e.productId,r=("object"==typeof e.product?e.product:void 0)||v.get(s);return(e.name||r?.name||"").toLowerCase().includes(t)}))}return e},[N,h,v]);return s.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm flex-shrink-0",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center gap-4",children:[s.jsx("button",{onClick:()=>l("/"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Go back to home",children:s.jsx(u,{className:"h-6 w-6 text-gray-700"})}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"My Order"})]})}),s.jsx("div",{className:"bg-gray-50 flex-shrink-0 border-b border-gray-200",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 py-4",children:s.jsx("div",{className:"flex gap-3",children:s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search here...",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})})})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 pb-20 md:pb-4",children:[f&&0===N.length&&s.jsx("div",{className:"space-y-3",children:[1,2,3].map(e=>s.jsxs("div",{className:"bg-white rounded-xl p-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx(m,{width:"w-32",height:"h-5"}),s.jsx(m,{width:"w-24",height:"h-4"})]}),s.jsx(m,{width:"w-20",height:"h-6",className:"rounded-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(m,{width:"w-full",height:"h-4"}),s.jsx(m,{width:"w-2/3",height:"h-4"})]})]},e))}),0!==w.length||f?null:s.jsx("div",{children:N.length>0&&h.trim()?s.jsx(o,{title:"No matching orders",description:"Try adjusting your search query.",IconComponent:p}):s.jsx(o,{title:"No Orders Yet",description:"You haven't placed any orders yet. Start shopping to place your first order!",actionLabel:"Browse Products",actionTo:"/products",IconComponent:t})}),s.jsx("div",{className:"space-y-4",children:w.map((e,t)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border border-gray-100 animate-fade-in-scale",children:[s.jsx("div",{className:"flex justify-between items-center mb-3",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:new Date(e.createdAt??Date.now()).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:(()=>{const t=e.items||[];if(0===t.length)return"Order";const s=t[0],r=s.productId,a=("object"==typeof s.product?s.product:void 0)||v.get(r),i=s.name||a?.name||"Items";return t.length>1?`${i} +${t.length-1} more`:i})()})]})}),s.jsx("div",{className:"mb-3 space-y-2",children:(e.items||[]).map((e,t)=>{const r=e.productId,a=("object"==typeof e.product?e.product:void 0)||v.get(r),n=e.name||a?.name||"Item",c="number"==typeof e.g?e.g:"number"==typeof a?.g?a.g:0,d="number"==typeof e.pieces?e.pieces:"number"==typeof a?.pieces?a.pieces:0,l=i({unitLabel:e.unitLabel||a?.unitLabel,g:c,pieces:d});return s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:n}),s.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Qty: ",e.quantity,l?` • ${l}`:""]})]}),s.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["₹",(Number(e.price)||0)*Number(e.quantity||0)]})]},String(e.productId||e.id||t))})}),s.jsxs("div",{className:"border-t border-gray-100 pt-3 space-y-1.5 text-sm",children:["number"==typeof e.subtotalPrice&&s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["₹",e.subtotalPrice]})]}),e.couponCode&&"number"==typeof e.discountAmount&&e.discountAmount>0&&s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsxs("span",{children:["Coupon (",e.couponCode,")"]}),s.jsxs("span",{children:["-₹",e.discountAmount]})]}),"number"==typeof e.deliveryFee&&s.jsxs("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsx("span",{children:0===e.deliveryFee?"Free":`₹${e.deliveryFee}`})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total Amount"}),s.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.totalPrice??0]})]})]}),e.address&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Delivery Address"}),s.jsx("p",{className:"text-sm text-gray-700",children:e.address})]})]},e._id||e.id||t))})]})})]})});
/**
       * @license lucide-react v0.554.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */
const t=l("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])}}});
