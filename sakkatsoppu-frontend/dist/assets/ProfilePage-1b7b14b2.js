import{j as e}from"./ui-vendor-090db037.js";import{r as s,b as t,u as r}from"./react-vendor-e826ac9a.js";import{b as a,o as l,U as d,S as o,k as i}from"./index-60e49c5c.js";import{M as n}from"./MapAddressModal-852bafff.js";import{S as c}from"./Shimmer-954c7611.js";import"./data-vendor-7193eb6f.js";import"./map-vendor-da2eca32.js";function u({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const m=s.forwardRef(u);function h(){var u;const{user:h,isAuthenticated:x,initializing:p,refreshProfile:g,avatarUrl:f}=a(),{t:b}=l(),j=t(),v=(null==(u=r().state)?void 0:u.promptComplete)||!1,[w,y]=s.useState("overview"),[N,k]=s.useState(v),[C,S]=s.useState(""),[M,A]=s.useState(""),[P,E]=s.useState(!1),[O,q]=s.useState({name:(null==h?void 0:h.name)||"",phone:(null==h?void 0:h.phone)||"",address:(null==h?void 0:h.address)&&"object"==typeof h.address&&"houseNo"in h.address?h.address:{houseNo:"",landmark:"",area:"string"==typeof(null==h?void 0:h.address)?h.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:(null==h?void 0:h.latitude)||0,longitude:(null==h?void 0:h.longitude)||0});if(s.useEffect(()=>{h&&q({name:h.name||"",phone:h.phone||"",address:h.address&&"object"==typeof h.address&&"houseNo"in h.address?h.address:{houseNo:"",landmark:"",area:"string"==typeof h.address?h.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:h.latitude||0,longitude:h.longitude||0})},[h]),p)return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[e.jsx(c,{width:"w-48",height:"h-8"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[e.jsx(c,{width:"w-full",height:"h-10"}),e.jsx(c,{width:"w-full",height:"h-10"}),e.jsx(c,{width:"w-full",height:"h-24"})]})]});if(!x)return null;if(!h)return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-4",children:[e.jsx(c,{width:"w-48",height:"h-8"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 space-y-4",children:[e.jsx(c,{width:"w-full",height:"h-10"}),e.jsx(c,{width:"w-full",height:"h-10"})]})]});const z=e=>{const{name:s,value:t}=e.target;q(e=>({...e,[s]:t}))},F=async e=>{e.preventDefault();try{await i(O),A("Profile updated successfully"),await g(),h&&q({name:h.name||"",phone:h.phone||"",address:h.address&&"object"==typeof h.address&&"houseNo"in h.address?h.address:{houseNo:"",landmark:"",area:"string"==typeof h.address?h.address:"",city:"Mysore",state:"Karnataka",pincode:""},latitude:h.latitude||0,longitude:h.longitude||0}),k(!1),y("overview")}catch(s){S("Failed to update profile")}},K=[{id:"profile",label:b("profile.myProfile"),icon:d,bgColor:"bg-blue-50",iconColor:"text-blue-600"},{id:"orders",label:b("profile.myOrders"),icon:o,bgColor:"bg-green-50",iconColor:"text-green-600",onClick:()=>j("/orders")}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"relative bg-gradient-to-br from-green-800 via-green-700 to-green-900 overflow-hidden pb-20 pt-8 md:pt-12",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-green-600 opacity-30 rounded-full -translate-x-12 -translate-y-12"}),e.jsx("div",{className:"absolute top-10 right-10 w-24 h-24 bg-green-900 opacity-20 rounded-full"}),e.jsx("div",{className:"absolute bottom-10 left-1/4 w-20 h-20 bg-green-600 opacity-25 rounded-full"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-16 h-16 bg-green-800 opacity-20 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-28 h-28 bg-green-900 opacity-15 rounded-full"}),e.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto px-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-8",children:b("profile.title")}),e.jsx("div",{className:"relative inline-block mb-4",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-white overflow-hidden border-4 border-white shadow-xl",children:f?e.jsx("img",{src:f,alt:h.name||"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-green-100 to-green-200",children:e.jsx(d,{className:"w-20 h-20 text-green-700"})})})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:h.name}),e.jsx("p",{className:"text-green-100 text-lg",children:(B=h.phone,"+91".concat(B))})]})]}),e.jsx("div",{className:"relative z-20 -mt-12 max-w-2xl mx-auto px-4 pb-20 md:pb-8",children:e.jsxs("div",{className:"bg-white rounded-t-3xl shadow-xl p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:b("profile.accountOverview")}),"overview"===w&&e.jsx("div",{className:"space-y-4",children:K.map(s=>e.jsxs("button",{onClick:()=>s.onClick?s.onClick():y(s.id),className:"w-full flex items-center justify-between p-4 bg-white rounded-2xl hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl ".concat(s.bgColor),children:e.jsx(s.icon,{className:"h-6 w-6 ".concat(s.iconColor)})}),e.jsx("span",{className:"font-medium text-gray-800",children:s.label})]}),e.jsx(m,{className:"h-5 w-5 text-gray-400"})]},s.id))}),"profile"===w&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:b("profile.editProfile")}),e.jsx("button",{onClick:()=>y("overview"),className:"text-sm text-gray-600 hover:text-gray-800",children:b("profile.cancel")})]}),C&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm",children:C}),M&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 p-3 rounded-lg text-sm",children:M}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:b("profile.fullName")}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:O.name,onChange:z,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1.5",children:b("profile.phoneNumber")}),e.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:O.phone,onChange:z,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:b("profile.address")}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"px-4 py-3 border-2 border-gray-200 rounded-xl bg-gray-50 text-gray-700 min-h-[3rem]",children:O.address.houseNo||O.address.area||O.address.landmark||O.address.city||O.address.state||O.address.pincode?[O.address.houseNo,O.address.area,O.address.landmark,O.address.city,O.address.state,O.address.pincode].filter(Boolean).join(", "):b("profile.noAddressSet")}),e.jsxs("button",{type:"button",onClick:()=>E(!0),className:"w-full px-4 py-3 bg-blue-50 text-blue-800 rounded-xl hover:bg-blue-100 border-2 border-blue-200 font-medium transition-all",children:["ðŸ“ ",b("profile.editAddress")]})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-4 rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition-all shadow-lg",children:b("profile.saveChanges")})]})]})]})}),e.jsx(n,{isOpen:P,onClose:()=>E(!1),onConfirm:e=>{q(s=>({...s,address:e.address,latitude:e.latitude,longitude:e.longitude})),E(!1)},defaultCenter:O.latitude&&O.longitude&&0!==O.latitude&&0!==O.longitude?{lat:O.latitude,lon:O.longitude}:null,initialAddress:O.address,showMap:!1})]});var B}export{h as ProfilePage};
