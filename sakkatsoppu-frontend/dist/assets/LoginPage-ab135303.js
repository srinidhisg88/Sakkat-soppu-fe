import{j as e,m as t}from"./ui-vendor-090db037.js";import{r as s,b as a,u as l,L as i}from"./react-vendor-e826ac9a.js";import{c as n}from"./index-afee60cc.js";import{E as r,L as o}from"./LockClosedIcon-f3e88ca2.js";import"./data-vendor-7193eb6f.js";function c({title:e,titleId:t,...a},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const d=s.forwardRef(c),m=new URL("/assets/logo_final-b879f40a.jpg",self.location).href;function u(){const[c,u]=s.useState(""),[p,x]=s.useState(""),[g,h]=s.useState(""),{login:f,loginWithGoogle:y}=n(),j=a(),v=l(),w=s.useRef(null),b="203150898820-m26a6nq4guoe1lcf6r883r5o44kjq1fn.apps.googleusercontent.com".trim();return s.useEffect(()=>{const e=b;if(!e)return;const t="google-identity";if(document.getElementById(t))s();else{const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.id=t,document.body.appendChild(e),e.onload=s}function s(){if(window.google&&google.accounts&&google.accounts.id){google.accounts.id.initialize({client_id:e,callback:async e=>{var t;const s=e.credential;if(s)try{h("");const e=await y(s);if(!(!e||!("needsProfileCompletion"in e))&&e.needsProfileCompletion)j("/profile",{replace:!0,state:{promptComplete:!0}});else{const e=v.state||null,s=(null==(t=null==e?void 0:e.from)?void 0:t.pathname)||"/";j(s,{replace:!0})}}catch(a){h("Google sign-in failed. Please try again.")}},ux_mode:"popup"}),w.current&&google.accounts.id.renderButton(w.current,{theme:"filled_blue",size:"large",shape:"pill",width:320,text:"continue_with"});try{google.accounts.id.prompt()}catch(t){}}}},[y,j,v.state,b]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[e.jsxs("div",{children:[e.jsx(t.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4},className:"mx-auto h-16 w-16 sm:h-20 sm:w-20 rounded-full bg-white overflow-hidden shadow",children:e.jsx("img",{src:m,alt:"Logo",className:"w-full h-full object-contain"})}),e.jsx(t.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome Back"}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access fresh produce from local farmers"})]}),g&&e.jsxs(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center space-x-2",children:[e.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:g})]}),e.jsxs(t.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},onSubmit:async e=>{var t;e.preventDefault();try{h(""),await f(c,p);const e=v.state||null,s=(null==(t=null==e?void 0:e.from)?void 0:t.pathname)||"/";j(s,{replace:!0})}catch(s){h("Failed to login. Please check your credentials.")}},className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(r,{className:"h-5 w-5 text-gray-400"})}),e.jsx(t.input,{whileFocus:{scale:1.02},id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:c,onChange:e=>u(e.target.value),className:"appearance-none relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Email address"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(o,{className:"h-5 w-5 text-gray-400"})}),e.jsx(t.input,{whileFocus:{scale:1.02},id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:p,onChange:e=>x(e.target.value),className:"appearance-none relative block w-full px-3 py-3 pl-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Password"})]})]})]}),e.jsx("div",{children:e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:e.jsx(o,{className:"h-5 w-5 text-green-500 group-hover:text-green-400"})}),"Sign in",e.jsx(d,{className:"ml-2 h-5 w-5"})]})}),e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm",children:e.jsx(i,{to:"/forgot-password",className:"font-medium text-green-600 hover:text-green-500",children:"Forgot your password?"})}),e.jsx("div",{className:"text-sm",children:e.jsx(i,{to:"/signup",className:"font-medium text-green-600 hover:text-green-500",children:"Create an account"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("div",{className:"flex-grow border-t border-gray-200"}),e.jsx("span",{className:"mx-3 text-gray-400 text-sm",children:"or"}),e.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),b?e.jsx("div",{ref:w,className:"flex justify-center",style:{minHeight:44}}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("button",{type:"button",disabled:!0,className:"w-full max-w-xs flex items-center justify-center gap-2 rounded-full bg-blue-600 text-white px-4 py-3 opacity-70 cursor-not-allowed",title:"Google sign-in unavailable",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:"h-5 w-5",children:[e.jsx("path",{fill:"#FFC107",d:"M43.6 20.5H42V20H24v8h11.3C33.8 31.7 29.3 35 24 35c-6.6 0-12-5.4-12-12s5.4-12 12-12c3 0 5.7 1.1 7.8 3l5.7-5.7C34.6 5.1 29.6 3 24 3 12.3 3 3 12.3 3 24s9.3 21 21 21 21-9.3 21-21c0-1.2-.1-2.3-.4-3.5z"}),e.jsx("path",{fill:"#FF3D00",d:"M6.3 14.7l6.6 4.8C14.2 16.5 18.7 13 24 13c3 0 5.7 1.1 7.8 3l5.7-5.7C34.6 5.1 29.6 3 24 3 16 3 9 7.3 6.3 14.7z"}),e.jsx("path",{fill:"#4CAF50",d:"M24 45c5.2 0 10-2 13.6-5.3l-6.3-5.3C29.1 35.5 26.7 36 24 36c-5.2 0-9.6-3.3-11.3-8l-6.6 5.1C8.7 40.6 15.8 45 24 45z"}),e.jsx("path",{fill:"#1976D2",d:"M43.6 20.5H42V20H24v8h11.3c-1 2.9-3.1 5.2-5.7 6.8l.1.1 6.3 5.3c-.4.3 7 5 7 5 4.1-3.8 6.5-9.4 6.5-15.9 0-1.2-.1-2.3-.4-3.5z"})]}),"Continue with Google"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Set VITE_GOOGLE_CLIENT_ID to enable"})]})]})]})})}export{u as LoginPage};
