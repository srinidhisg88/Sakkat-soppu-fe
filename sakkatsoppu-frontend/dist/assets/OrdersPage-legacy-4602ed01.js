System.register(["./ui-vendor-legacy-1ce3db5f.js","./react-vendor-legacy-40b14165.js","./format-legacy-97f32d7b.js","./index-legacy-fe97776e.js","./EmptyState-legacy-a5d8cc30.js","./data-vendor-legacy-6b4cc34b.js"],function(e,t){"use strict";var s,r,n,a,i,d,c,l;return{setters:[e=>{s=e.j},e=>{r=e.r},e=>{n=e.d},e=>{a=e.c,i=e.n,d=e.g},e=>{c=e.E},e=>{l=e.u}],execute:function(){e("OrdersPage",function(){const{isAuthenticated:e}=a(),[t,o]=r.useState("all"),x=e=>{if(!e)return"pending";const t=String(e).trim().toLowerCase();return"canceled"===t?"cancelled":t.startsWith("deliver")?"delivered":t.startsWith("confirm")?"confirmed":t.startsWith("pend")?"pending":["pending","confirmed","delivered","cancelled"].includes(t)?t:"pending"},{data:u=[],isLoading:m}=l({queryKey:["orders"],queryFn:async()=>{const e=(await i()).data;return Array.isArray(e)?e:e&&"object"==typeof e&&Array.isArray(e.data)&&e.data||[]}}),{data:p=[]}=l({queryKey:["products","for-orders"],queryFn:async()=>{const e=await d({page:1,limit:500}),t=e=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){const s=e,r=["data","products","items","results","payload"];for(const e of r)if(e in s){const r=t(s[e]);if(Array.isArray(r))return r}const n=Object.values(s).find(Array.isArray);if(n)return t(n)}return[]};return t(e.data)},staleTime:6e4}),y=new Map;for(const s of p)if(s&&"object"==typeof s){const e=s,t="string"==typeof e._id?e._id:void 0,r="string"==typeof e.id?e.id:void 0;t&&y.set(t,s),r&&y.set(r,s)}let h=u;if(!e){const e=localStorage.getItem("sakkat_orders");h=e?JSON.parse(e):[]}const j="all"===t?h:h.filter(e=>x(e.status)===t);return s.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"My Orders"}),s.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:["all","pending","confirmed","delivered","cancelled"].map(e=>s.jsx("button",{onClick:()=>o(e),className:"px-3 py-1 rounded-full text-sm "+(t===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700"),children:e[0].toUpperCase()+e.slice(1)},e))}),m&&0===h.length&&s.jsx("div",{className:"py-4",children:s.jsx(c,{title:"Loading orders...",icon:s.jsx("span",{children:"⏳"})})}),0===j.length?s.jsx("div",{className:"py-4",children:h.length>0&&"all"!==t?s.jsx(c,{title:`No orders with status "${t}"`,description:"Try switching the status filter to see other orders.",icon:s.jsx("span",{children:"🔎"})}):s.jsx(c,{title:"No Orders Yet",description:"You haven't placed any orders yet. Start shopping to place your first order!",actionLabel:"Browse Products",actionTo:"/products",icon:s.jsx("span",{children:"🧺"})})}):null,s.jsx("div",{className:"space-y-4",children:j.map(e=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-gray-600",children:["Order placed on"," ",new Date(e.createdAt??Date.now()).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Order ID: ",e._id||e.id]})]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium\n                  ${"delivered"===x(e.status)?"bg-green-100 text-green-800":"cancelled"===x(e.status)?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}\n                `,children:(()=>{const t=x(e.status);return t.charAt(0).toUpperCase()+t.slice(1)})()})]}),s.jsx("div",{className:"border-t border-b py-3 mb-3",children:(e.items||[]).map(e=>s.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[s.jsx("div",{children:(()=>{const t=e.productId,r=("object"==typeof e.product?e.product:void 0)||y.get(t),a=e.name||r?.name||"Item",i="number"==typeof e.g?e.g:"number"==typeof r?.g?r.g:0,d="number"==typeof e.pieces?e.pieces:"number"==typeof r?.pieces?r.pieces:0,c=n({unitLabel:e.unitLabel||r?.unitLabel,g:i,pieces:d});return s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium text-sm",children:a}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Qty: ",e.quantity,c?` • for ${c}`:""]})]})})()}),s.jsxs("p",{className:"font-medium text-sm",children:["₹",(Number(e.price)||0)*Number(e.quantity||0)]})]},String(e.productId||e.id||Math.random())))}),s.jsxs("div",{className:"mt-2 space-y-1 text-sm",children:["number"==typeof e.subtotalPrice&&s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["₹",e.subtotalPrice]})]}),e.couponCode&&"number"==typeof e.discountAmount&&e.discountAmount>0&&s.jsxs("div",{className:"flex justify-between text-green-700",children:[s.jsxs("span",{children:["Coupon (",e.couponCode,")"]}),s.jsxs("span",{children:["-₹",e.discountAmount]})]}),"number"==typeof e.deliveryFee&&s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Delivery Fee"}),s.jsx("span",{children:0===e.deliveryFee?"Free":`₹${e.deliveryFee}`})]})]}),s.jsxs("div",{className:"flex justify-between items-center mt-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Delivery Address"}),s.jsx("p",{className:"mt-0.5 text-sm",children:e.address})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"Total Amount"}),s.jsxs("p",{className:"text-lg font-bold",children:["₹",e.totalPrice??0]})]})]})]},e._id||e.id))})]})})}}});
